# Server Configuration
server.port=8080

# Database Configuration (PostgreSQL)
spring.datasource.url=jdbc:postgresql://localhost:5432/kiosk_db
spring.datasource.username=postgres
spring.datasource.password=postgres
# Rate Limiting
bucket4j.enabled=true
bucket4j.filters[0].cache-name=rate-limit-bucket
bucket4j.filters[0].url=.*
bucket4j.filters[0].rate-limits[0].bandwidths[0].capacity=10
bucket4j.filters[0].rate-limits[0].bandwidths[0].time=1
bucket4j.filters[0].rate-limits[0].bandwidths[0].unit=minutes

# Jackson JSON Configuration
spring.jackson.serialization.write-dates-as-timestamps=false

# Circuit Breaker Configuration
resilience4j.circuitbreaker.instances.billerService.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.billerService.slidingWindowSize=10
resilience4j.circuitbreaker.instances.billerService.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.billerService.slidingWindowType=COUNT_BASED
resilience4j.circuitbreaker.instances.billerService.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.billerService.waitDurationInOpenState=10s
resilience4j.circuitbreaker.instances.billerService.failureRateThreshold=50
resilience4j.circuitbreaker.instances.billerService.eventConsumerBufferSize=10
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.generate_statistics=false
management.metrics.enable.hikari=true
spring.jpa.defer-datasource-initialization=true
spring.sql.init.mode=always

# Crypto Master Secret (Must match frontend)
kiosk.master.secret=TEST_MASTER_SECRET_1234567890_CHANGE_ME
logging.file.name=server.log
logging.level.com.kiosk.backend.filter=INFO

# Actuator Endpoints
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.endpoint.prometheus.enabled=true
management.metrics.tags.application=kiosk-backend
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.distribution.sla.http.server.requests=10ms, 50ms, 100ms, 200ms, 500ms, 1s, 5s

# Resilience4j Metrics
resilience4j.circuitbreaker.metrics.enabled=true
resilience4j.ratelimiter.metrics.enabled=true
